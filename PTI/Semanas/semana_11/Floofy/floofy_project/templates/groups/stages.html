{% extends "base.html" %}

{% block content %}

<div class="container">
    <div class="row centered">
        <div class="col-lg-10 offset-lg-1">
        <h1 class="text-center" id="area_student_title"> {{ user.firstname }} {{ user.surname}} <br>
            Area de etapas de {{subject}} 
        </h1>
        </div>
    </div>
</div>

<br>
{% for stage in stages %}
    <p>{{ stage.name }}</p>
    <p>{{ stage.id }}</p>
    <p>{{ stage.description }}</p>
    <p>{{ stage.deadline }}</p>
    <br>
    {% if user.is_student %}
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="file" name="myfile">
        <input type="hidden" name="stage" value={{ stage.id|stringformat:"i" }}>
        <button type="submit">Upload/Update</button>
    </form>
    <br>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="hidden" name="submission" value={{ stage.id|stringformat:"i" }}>
        <button type="submit">Download</button>
    </form>
    {% endif %}
{% endfor %}

{% if user.is_teacher %}
<p>Criar nova etapa</p>
<div>
    <form method="POST" action="{% url 'stages' subject.id %}">
        {% csrf_token %}
        <label>Nome</label>
        <input type='text' name="name">
        <br>
        <label>Descrição</label>
        <input type='text' name="description">
        <br>
        <label>Prazo</label>
        <input type='date' name="deadline">
        <br>
        <input type="submit" value="Criar etapa">
    </form>
</div>
{% endif %}
<a href="{% url 'groups-subject' subject.id %}">Back</a>
{% endblock %}